let q = [
            ["Q-->1 Which transport layer protocal is used by DHCP",
              {
                    "TCP": false,
                    "UDP": true,
                    "DHCP":false,
                    "All of these": false
                }
            ],
            ["Q-->2 which address schemes are used by ipv4 and ipv6 internet protocal ",
              {
                    "128-bit and 32 bit": false,
                    "32-bit and 128-bit":true,
                    "Both": false,
                    "None": false
                }
            ],
            ["Q-->3 Which is the lowest lowest layer of OSI model",
              {
                    "Network": false,
                    "physical": true,
                    "Data link":false,
                    "Application": false
                }
            ],
            ["Q-->4 Application layer of TCP/IP is equivalent to which OSI layers?",
              {
                    "Data link + Physical": false,
                    "Network + Transport": false,
                    "Session + Presentation + Application":true,
                    "Physical + Network": false
                }
            ],
            ["Q-->5 Which is the most common lightweight protocol in IoT?",
              {
                    "HTTP": false,
                    "MQTT":true,
                    "FTP":false,
                    "None": false
                }
            ],
            ["Q-->6 OSI model has how many layers?",
              {
                    "4": false,
                    "5": false,
                    "7":true,
                    "8": false
                }
            ],
            ["Q-->7 Refrigeration thermostat is which type of system?",
              {
                    "Open-loop": false,
                    "Closed-loop": true,
                    "Manual":false,
                    "Hybrid": false
                }
            ],
            ["Q-->8 Which extra block is present in closed-loop control system?",
              {
                    "Amplifier": false,
                    "Feedback": true,
                    "Controller":false,
                    "Comparator": false
                }
            ],
            ["Q-->9 Which is a feature of a control system?",
              {
                    "Stability": false,
                    "Accuracy": false,
                    "Sensitivity":false,
                    "All of the above": true
                }
            ],
            ["Q-->10 Working of a control system is based on:",
              {
                    "Input-Output relationship": true,
                    "Random output": false,
                    "Manual tuning":false,
                    "None of the above": false
                }
            ],
            ["Q-->11 TCP/IP model has how many layers?",
              {
                    "4": true,
                    "5": false,
                    "6":false,
                    "7": false
                }
            ],
            ["Q-->12 CoAP protocol is mainly used for:",
              {
                    "Email communication": false,
                    "Resource-constrained IoT devices": true,
                    "File transfer":false,
                    "Video streaming": false
                }
            ],
            ["Q-->13 In simplex mode, data flow is:",
              {
                    "Both directions simultaneously": false,
                    "In only one direction": true,
                    "In alternate direction":false,
                    "Random": false
                }
            ],
            ["Q-->14 Example of duplex transmission is:",
              {
                    "Keyboard to CPU": false,
                    "Walkie-talkie": false,
                    "Telephone":true,
                    "Loudspeaker": false
                }
            ],
            ["Q-->15 Twisted pair cable is which type of media?",
              {
                    "Wireless": false,
                    "Guided": true,
                    "Unguided":false,
                    "Optical": false
                }
            ],
            ["Q-->16 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->17 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->18 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->19 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->20 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->21 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->22 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->23 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->24 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->25 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->26 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->27 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->28 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->29 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->30 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->31 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->32 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->33 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->34 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->35 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->36 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->37 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->38 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->39 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->40 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->41 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->42 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->43 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->44 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->45 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->46 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->47 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->48 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->49 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ],
            ["Q-->50 ",
              {
                    "": false,
                    "": false,
                    "":false,
                    "": false
                }
            ]
            

        ];


        let index = 0;
        let total = 0;
        let answered = new Array(q.length).fill(false);
        let selectedAnswers = new Array(q.length).fill(null);
        let que = document.getElementById("question");
        let feedback = document.getElementById("feedback");
        let h2 = document.createElement("h2");
        que.appendChild(h2);

        let buttons = [];
        let s_btn;
        let h_solov=document.getElementById("h_solov");
        for(let i=1;i<=q.length;i++){
            s_btn=document.createElement("button");
             s_btn.id=`sbtn${i}`;
            s_btn.className="sbtn";
            s_btn.textContent=i;
            h_solov.appendChild(s_btn);
        }

        for (let i = 0; i < 4; i++) {
            let btn = document.createElement("button");
            btn.className = "b";
            btn.addEventListener("click", () => ans(btn.textContent));
            que.appendChild(btn);
            buttons.push(btn);
        }

        function render() {
            let current = q[index];
            h2.textContent = current[0];
            let options = current[1];
            let keys = Object.keys(options);
            for (let i = 0; i < 4; i++) {
                buttons[i].textContent = keys[i];
                buttons[i].disabled = answered[index];
                buttons[i].style.backgroundColor = ""; 
            }
            feedback.textContent = "";
        }

        function next() {
            index++;
            if (index >= q.length) {
                index = 0;
            }
            render();
        }

        function privious() {
            index--;
            if (index < 0) {
                index = q.length - 1;
            }
            render();
        }

        function ans(selectedAns) {
            if (answered[index]) return;
            let options = q[index][1];
            selectedAnswers[index] = selectedAns;
            answered[index] = true;
            let temp=index+1;
            document.getElementById(`sbtn${temp}`).style.backgroundColor="green"
            if (options[selectedAns]) {
                total++;
            }
            render();
        }

        function submitQuiz() {
            total = 0; // Recalculate total
            for (let i = 0; i < q.length; i++) {
                let options = q[i][1];
                let correctAnswer = Object.keys(options).find(key => options[key]);
                if (selectedAnswers[i] === correctAnswer) {
                    total++;
                }
            }
            if(confirm("Do you want a  submit in this test")){
                 feedback.value = total;
                // feedback.style.color = "blue";
                document.getElementById("form_main").style.display="block";
                document.getElementById("quiz").style.display="none";
                document.getElementById("hh_solov").style.display="none";
                
                document.getElementById("time").style.display="none";
                showCorrectAnswers();
                
            }
        }

        function showCorrectAnswers() {
            let current = q[index];
            let options = current[1];
            let keys = Object.keys(options);
            let correctAnswer = keys.find(key => options[key]);

            for (let i = 0; i < 4; i++) {
                let btn = buttons[i];
                let btnText = btn.textContent;
                btn.disabled = true; // Disable buttons after submission
                
            }
        }

        // Whenever you render, if already submitted, show correct answer
        function render() {
            let current = q[index];
            h2.textContent = current[0];
            let options = current[1];
            let keys = Object.keys(options);
            for (let i = 0; i < 4; i++) {
                let btn = buttons[i];
                btn.textContent = keys[i];
                btn.disabled = answered[index];
                btn.style.backgroundColor = "";
            }
            feedback.textContent = "";

            // If quiz already submitted, show correct answer for this question
            if (feedback.textContent !== "") {
                showCorrectAnswers();
            }
        }
        
//rule start  
let check=document.getElementById("check_box");
let btn_info=document.getElementById("info__btn");
check.addEventListener('change', function(){
    if(this.checked){
        btn_info.style.display="block";
    }
    else{
        btn_info.style.display="none";
    }
});

function quiz_start(){
    document.getElementById("quiz").style.display="block";
    document.getElementById("hh_solov").style.display="block";
    document.getElementById("detail").style.display="none";
}





// rule end 

        function from_submit(){
            var roll_no=document.getElementById("roll").value;
            var Name=document.getElementById("name").value;
            var f_name=document.getElementById("f_name").value;
            var course=document.getElementById("course").value;
            if(roll_no =="" || Name =="" || f_name =="" || course ==""){
                alert("Please fill all info");
                return;
            }
            document.getElementById("quiz").style.display="none";
            document.getElementById("form").style.display="block";
        }
    

// show pass 
let check_box=document.getElementById("remember");
let pass=document.getElementById("password")
check_box.addEventListener('change', function(){
    if(this.checked){
        pass.type="text";
    }
    else{
        pass.type="password";
    }
});
// end show password

//login user
let user_name=""
let password=0;
let login_name=document.getElementById("user");
function login_usar(){
    if(pass.value==password && login_name.value==user_name){
        document.getElementById("detail").style.display="block";
        document.getElementById("login").style.display="none";
        //document.getElementById("quiz").style.display="block";
        

    }else{
        alert("invalid username and password");
    }
}

        let t=document.getElementById("time");
        let total_time=30*60;
        let min=34;
        let sec=60;
       


        function show_time(){
            if(sec==0){
                t.innerHTML="Time out -->"+min+": "+sec;
                sec=60;
                min--;
            }
            t.innerHTML="Time out -->"+min+": "+sec;
            sec--;

        }
    setInterval(show_time, 1000);
    let time_up=60000*35;
    setTimeout(function(){
        alert("your exam finished");
        t.style.display="none";
        submitQuiz();
        }, time_up)
            render();
            //information();



// API call for google sheets
const scriptURL = 'https://script.google.com/macros/s/AKfycbyun6wj9Dyv1gFmTJNwcqVjhzWgEC6lXxxDWuzJiVR5ldpDvYO6E3kKIdTA22EGrBu8/exec'
            const form = document.forms['google-sheet']
          
            form.addEventListener('submit', e => {
              e.preventDefault()
              fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => alert("Thanks you ! your test submited"))
                .catch(error => console.error('Error!', error.message))
            })
